<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Which genres are majority male/female?</title>
    <link rel="icon" type="image/svg" href="../img/g2k_det_log.svg">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: #0d1117;
            color: #c9d1d9;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans', Helvetica, Arial, sans-serif;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            overflow-x: hidden;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('../img/g2k_det_log.svg');
            background-repeat: no-repeat;
            background-position: center;
            background-size: cover;
            opacity: 0.025;
            z-index: 0;
            pointer-events: none;
        }

        /* Header */
        header {
            background-color: #161b22;
            border-bottom: 1px solid #30363d;
            padding: 16px 32px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo-container img {
            height: 40px;
            width: auto;
        }

        .img-logo {
            height: 200px;
            width: auto;
        }

        /* Navigation */
        nav {
            display: flex;
            gap: 8px;
        }

        .nav-item {
            position: relative;
        }

        .nav-button {
            background: none;
            border: none;
            color: #c9d1d9;
            padding: 8px 16px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            border-radius: 6px;
            transition: background-color 0.2s;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .nav-button:hover {
            background-color: #30363d;
        }

        .nav-button::after {
            content: 'â–¼';
            font-size: 10px;
            margin-left: 4px;
        }

        /* Dropdown */
        .dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            background-color: #161b22;
            border: 1px solid #30363d;
            border-radius: 6px;
            margin-top: 8px;
            min-width: 200px;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.2s;
            box-shadow: 0 8px 24px rgba(1, 4, 9, 0.5);
            z-index: 1000;
        }

        .nav-item:hover .dropdown {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .dropdown a {
            display: block;
            padding: 12px 16px;
            color: #c9d1d9;
            text-decoration: none;
            font-size: 14px;
            transition: background-color 0.2s;
        }

        .dropdown a:first-child {
            border-radius: 6px 6px 0 0;
        }

        .dropdown a:last-child {
            border-radius: 0 0 6px 6px;
        }

        .dropdown a:hover {
            background-color: #6da1b4;
        }

        /* Main Content */
        main {
            flex: 1;
            padding: 48px 32px;
            max-width: 1300px;
            width: 100%;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        .page-logo {
            height: 200px;
            width: auto;
            margin-bottom: 24px;
        }

        .content-header {
            margin-bottom: 32px;
        }

        .content-header h1 {
            font-size: 32px;
            font-weight: 600;
            color: #f0f6fc;
            margin-bottom: 8px;
        }

        .content-header p {
            font-size: 16px;
            color: #8b949e;
            line-height: 1.6;
        }

        /* Text Section */
        .text-section {
            max-width: 1000px;
            margin-bottom: 32px;
        }

        .text-section p {
            font-size: 16px;
            line-height: 1.6;
            color: #c9d1d9;
            margin-bottom: 16px;
        }

        .text-section a {
            color: #58a6ff;
            text-decoration: none;
        }

        .text-section a:hover {
            text-decoration: underline;
        }

        /* Content Card */
        .content-card {
            background-color: #161b22;
            border: 1px solid #30363d;
            border-radius: 6px;
            max-width: 1000px;
            padding: 32px;
            margin-bottom: 32px;
        }

        .content-card h2 {
            font-size: 24px;
            font-weight: 600;
            color: #f0f6fc;
            margin-bottom: 16px;
        }

        .content-card h3 {
            font-size: 18px;
            font-weight: 600;
            color: #f0f6fc;
            margin-top: 24px;
            margin-bottom: 12px;
        }

        .content-card p {
            font-size: 16px;
            line-height: 1.6;
            color: #c9d1d9;
            margin-bottom: 16px;
        }

        .content-card ul, .content-card ol {
            margin-left: 24px;
            margin-bottom: 16px;
        }

        .content-card li {
            font-size: 16px;
            line-height: 1.6;
            color: #c9d1d9;
            margin-bottom: 8px;
        }

        .content-card a {
            color: #58a6ff;
            text-decoration: none;
        }

        .content-card a:hover {
            text-decoration: underline;
        }

        /* Code Blocks */
        .code-block {
            background-color: #0d1117;
            border: 1px solid #30363d;
            border-radius: 6px;
            padding: 16px;
            margin: 16px 0;
            overflow-x: auto;
        }

        .code-block code {
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 14px;
            color: #c9d1d9;
            line-height: 1.5;
        }

        /* Inline Code */
        code {
            background-color: #0d1117;
            color: #79c0ff;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 14px;
        }

        /* Visualization Container - matches index.html */
        .visualization-container {
            background-color: #161b22;
            border: 1px solid #30363d;
            border-radius: 6px;
            padding: 0;
            height: 700px;
            overflow: hidden;
            position: relative;
            margin-bottom: 32px;
        }

        .text-section ul, .text-section ol {
            margin-left: 24px;
            margin-bottom: 16px;
        }

        .text-section li {
            font-size: 16px;
            line-height: 1.6;
            color: #c9d1d9;
            margin-bottom: 8px;
        }
        
        /* Iframe Control Buttons */
        .iframe-controls {
            position: absolute;
            top: 20px;
            right: 490px;
            z-index: 10;
        }

        .iframe-dropdown {
            background-color: #21262d;
            border: 1px solid #30363d;
            color: #c9d1d9;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans', Helvetica, Arial, sans-serif;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23c9d1d9' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 8px center;
            padding-right: 32px;
            min-width: 150px;
        }

        .iframe-dropdown:hover {
            background-color: #30363d;
        }

        .fullscreen-btn {
            position: absolute;
            top: 20px;
            right: 375px;
            background-color: #21262d;
            border: 1px solid #30363d;
            color: #c9d1d9;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 6px;
            z-index: 10;
            transition: background-color 0.2s;
        }

        .fullscreen-btn:hover {
            background-color: #30363d;
        }

        .visualization-container:fullscreen {
            padding: 0;
            height: 100vh;
        }

        .visualization-container:fullscreen iframe {
            height: 100vh;
        }

        /* Footer */
        footer {
            background-color: #161b22;
            border-top: 1px solid #30363d;
            padding: 24px 32px;
            text-align: center;
            position: relative;
            z-index: 1;
        }

        .footer-content {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 24px;
        }

        .footer-logo {
            height: 40px;
            width: auto;
        }

        footer a {
            color: #58a6ff;
            text-decoration: none;
            font-size: 14px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: color 0.2s;
        }

        footer a:hover {
            color: #79c0ff;
            text-decoration: underline;
        }

        .github-icon {
            width: 20px;
            height: 20px;
            fill: currentColor;
        }
    </style>
</head>
<body>
    <header>
        <div class="logo-container">
            <a href="../index.html">
                <img src="../img/g2k_txt_log.svg" alt="Logo">
            </a>
        </div>
        
        <nav>
            <div class="nav-item">
                <button class="nav-button">Maps</button>
                <div class="dropdown">
                    <a href="../maps/authors-by-country.html">Authors (country)</a>
                    <a href="../maps/authors-by-genre.html">Authors (genre) </a>
                    <a href="../maps/books-by-country-and-time.html">Books (country/time) </a>
                </div>
            </div>

            <div class="nav-item">
                <button class="nav-button">Graphs</button>
                <div class="dropdown">
                    <a href="../graphs/individual-authors.html">Individual Authors</a>
                    <a href="../graphs/individual-books.html">Individual Books</a>
                    <a href="../graphs/authors-by-genre.html">Authors by Genre</a>
                    <a href="../graphs/books-by-genre.html">Books by Genre</a>
                </div>
            </div>

            <div class="nav-item">
                <button class="nav-button">Articles</button>
                <div class="dropdown">
                    <a href="../articles/genre-gender-splits.html"><i>"Which genres are majority male/female?"</i></a>
                </div>
            </div>

            <div class="nav-item">
                <button class="nav-button">Info</button>
                <div class="dropdown">
                    <a href="../info/about.html">About</a>
                    <a href="../info/methods.html">Methods</a>
                </div>
            </div>
        </nav>
    </header>

    <main>
        <img src="../img/g2k_txt2_log.svg" alt="Logo" class="img-logo">
        
        <div class="content-header">
            <h1>Which genres are majority male/female?</h1>
            <p> A gendered analysis of author (reader) writing (reading) habits.</p>
        </div>
        
        <div class="text-section">
            <p>Gendered preferences in book genre has been studied in the past, but with the Goodreads data available, we have the ability to study
            two important and distinct questions:</p>
            <ol>
                <li>What are the gender splits within a genre? e.g., what share of Goodreads horror authors are male?</li>
                <li>What are the genre compositions within gender? e.g., what share of male users enjoy horror books?</li>
            </ol>
            
            <p>The first question lets us look at the gendered composition within any given genre. The one issue with this approach, though, is that 
            all measures will be impacted by the overall gendered composition on Goodreads. For example, if 66% of Goodreads users are female, and if we
            find that 50% of users who enjoy science-fiction are female, then science-fiction is actually male-dominated (even though there's a 50-50 split). This 
            isn't a big issue as long as we have a baseline comparison, but it makes interpretations a bit annoying.</p>

            <p>
                The second question allows us to study a different subject: the preference composition within a gender. For example, we can look at the share of enjoyed genres,
                among men only, that horror makes up. 
            </p>
        </div>

        <div class="content-card">
            <h2>Methodology</h2>
            <p>
                Authors can have multiple genres listed on their Goodreads page. For example, <a href="https://www.goodreads.com/author/show/5031312" target="_blank" rel="noopener noreferrer">Dante</a>
                has poetry, religion and philosophy listed. In order to capture all these genres, I unnest this array so that there is a author record with each genre. For example, there
                would be three records for Dante of the form, "('Male', 'poetry'), ('Male', 'religion'), ('Male', 'philosophy')." In order to study meaningful authors and have reliable estimates, 
                I limit authors included to those with at least 100 user ratings, and genre groups to those with at least 100 author records in them. 
            </p>

            <p>
                A similar process is applied to Goodreads users and their "favorite genres." Here, I limit genre groups to those with at least 1000 user records in them,
                as there was a much larger number of distinct genres for users.
            </p>

            <p>
                Genre prediction for authors is based on their name, and a pronoun analysis of their Goodreads description. Gender-name data comes from the 
                <a href="https://tind.wipo.int/record/49408?v=tab&ln=en" target="_blank" rel="noopener noreferrer">World Gender Name Dictionary 2.0 Dataset</a>, specifically
                the location-irrelevant dataset, as I don't have reliable location estimates for both author and user data. For author description, the male and female pronoun
                instances are counted, and an author is defined as male or female based on which count is greater. Gender prediction based on pronoun analysis takes higher
                priority over the gender-name analysis. In the case that no pronouns are found, or when the counts are equal, the gender-name prediction is taken. When both are unreliable
                or null, then the final prediction is null. Only authors with "reliable" predictions are included.
            </p>

            <p>
                There is no user description available, so all gender predictions for users are based on the gender-name analysis. Users with indeterminate results are
                not included in the analysis.
            </p>

            <p>
                For within gender compositions (the pie charts below), I further group genres into broader categories, in order to reduce the number of slices
                present. For example, genres that match the following regex pattern, "computer|tech|^science$|math", are categorized as "STEM". You can see the rest of
                the groupings <a href="https://github.com/rhawrami/guide2kulchur/blob/main/scripts/visuals/07_genre_analysis.py" target="_blank" rel="noopener noreferrer">in this script</a>. 
            </p>
        </div>

        <div class="text-section">
            <h2>Gender Splits</h2>
            <br>
            <p>
                The figure belows the author gender split within different genres. For reference, the author sample is about 48% male, meaning that any genre with a 
                male share greater than 48% would be disproportiantely male. We can see some fairly intuitive, and replicated (in reference to past literature), results.
                Some of the "most male" genres include subjects like philosophy (84% male), economics (86% male) and military history (99% male). The "most female" genres include subjects
                like romance (8% male), young adult (25% male) and chick-lit (5% male).
            </p>
        </div>

        <div class="visualization-container" id="author-split">
            <iframe 
                src="../figs/gsplit_author.html" 
                loading="lazy"
                title="Author Gender Split by Genre" 
                style="width: 100%; height: 100%; border: none; display: block;">
            </iframe>
        </div>

        <div class="text-section">
            <p>
                User gender splits are heavily skewed by the fact that only about 23% of the user sample is male. We still see fairly similar trends. There are
                disproportionately male genres like sports (53% male) and business (49% male), and there are disproportionately female genres like true-crime (18% male)
                and women's fiction (5% male). In the "middle" are fairly proportional genres like poetry (24% male) and historical fiction (22% male).
            </p>
        </div>

        <div class="visualization-container" id="user-split">
            <iframe 
                src="../figs/gsplit_user.html" 
                loading="lazy"
                title="User Gender Split by Genre" 
                style="width: 100%; height: 100%; border: none; display: block;">
            </iframe>
        </div>

        <div class="text-section">
            <h2>Within-Gender Composition</h2>
            <br>
            <p>
                The within-gender composition allows us to ignore the overall gender split of our samples, and study preferences for each gender. The figure below
                shows genre compositions for male and female authors. Aside from the "other" category, the most common genres for male authors are mystery/crime 
                (10%), sci-fi/fantasy (10%) and non-fiction (8%). The most common genres for female authors are romance/erotica (16%), sci-fi/fantasy (9%) and 
                fiction (8%). 
            </p>
            <p>
                Some notable differences between male and female authors can be seen in genres like romance/erotica (2% for men, 16% for women), 
                history (6% for men, 1% for women), and manga/comics (4% for men, 1% for women).
            </p>
        </div>

        <div class="visualization-container" id="author-comp">
            <iframe 
                src="../figs/gcomp_author.html" 
                loading="lazy"
                title="Author Within-Gender Composition" 
                style="width: 100%; height: 100%; border: none; display: block;">
            </iframe>
        </div>

        <div class="text-section">
            <p>
                Compositions for male and female users are a bit more similar. Sci-Fi/Fantasy is the most common genre for men to read (12%), while 
                mystery/crime is the most common for women (14%). Romance/erotica is one genre with notable differences in consumption by gender (3% for men, 7% for women). On the other side,
                manga/comics is more common among men than women (4% for men, 2% for women).
            </p>
        </div>

        <div class="visualization-container" id="user-comp">
            <iframe 
                src="../figs/gcomp_user.html" 
                loading="lazy"
                title="User Within-Gender Composition" 
                style="width: 100%; height: 100%; border: none; display: block;">
            </iframe>
        </div>

        <div class="text-section">
            <h2>Conclusion/Further Work</h2>
            <br>
            <p>
                In this brief analysis, we show both differences in representation for authors and users, as well as differences in preferences. One further extension
                that would be worth exploring is simply looking at the rate of some genre being present in a user's favorite genres. For example, what share of male 
                users have romance in their favorite genres, and what share of female users have STEM in their favorite genres? The current analysis doesn't really get at
                this question, as it rather looks at what the most common genres users read are.
            </p>
            <p>
                Still this analysis shows differences in author and user representation in different genres, like the male-dominated philosophy and sports, and the female-dominated
                romance and young-adult fiction.
            </p>
        </div>

    </main>

    <footer>
        <div class="footer-content">
            <img src="../img/g2k_det_log.svg" alt="Logo" class="footer-logo">
            <a href="https://github.com/rhawrami/guide2kulchur" target="_blank" rel="noopener noreferrer">
                <svg class="github-icon" viewBox="0 0 16 16" version="1.1" aria-hidden="true">
                    <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path>
                </svg>
                Repository
            </a>
        </div>
    </footer>

    <script>
        function toggleFullscreen() {
            const container = document.getElementById('vizContainer');
            if (!document.fullscreenElement) {
                container.requestFullscreen().catch(err => {
                    console.error('Error attempting to enable fullscreen:', err);
                });
            } else {
                document.exitFullscreen();
            }
        }

        function changeIframe(url) {
            // Change the iframe source
            document.getElementById('mainIframe').src = url;
        }
    </script>
</body>
</html>